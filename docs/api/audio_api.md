# ðŸŽµ ì˜¤ë””ì˜¤ ì²˜ë¦¬ API

## ðŸ“‹ ê°œìš”

ì˜¤ë””ì˜¤ íŒŒì¼ ì—…ë¡œë“œ, STT ì²˜ë¦¬, Speaker Diarizationì„ ë‹´ë‹¹í•˜ëŠ” APIìž…ë‹ˆë‹¤.

**ìž‘ì„±ìž**: 

## ðŸ”— ê´€ë ¨ íŒŒì¼

- **êµ¬í˜„**: `src/audio/whisper_stt.py`, `src/audio/speaker_diarization.py`
- **API**: `src/api/routes/audio.py`
- **í…ŒìŠ¤íŠ¸**: `tests/test_audio.py`

## ðŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

### POST /audio/upload

ì˜¤ë””ì˜¤ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  STT ì²˜ë¦¬ ë° ë°œí™”ìž ë¶„ë¦¬ë¥¼ ì‹œìž‘í•©ë‹ˆë‹¤.

#### ìš”ì²­

**Content-Type**: `multipart/form-data`

| íŒŒë¼ë¯¸í„° | íƒ€ìž… | í•„ìˆ˜ | ì„¤ëª… |
|----------|------|------|------|
| `file` | File | âœ… | ì˜¤ë””ì˜¤ íŒŒì¼ (wav, mp3, m4a) |
| `title` | string | âŒ | íšŒì˜ ì œëª© |
| `participants` | array | âŒ | ì°¸ê°€ìž ëª©ë¡ |

#### ì‘ë‹µ

```json
{
  "message": "Audio file uploaded successfully",
  "filename": "20240101_120000_meeting.mp3",
  "file_path": "./data/raw/20240101_120000_meeting.mp3",
  "file_size": 1024000,
  "title": "íŒ€ í”„ë¡œì íŠ¸ ê¸°íš íšŒì˜",
  "participants": ["ê¹€ì² ìˆ˜", "ì´ì˜í¬", "ë°•ë¯¼ìˆ˜"],
  "status": "uploaded"
}
```

#### ì˜ˆì‹œ

```bash
curl -X POST "http://localhost:8000/api/v1/audio/upload" \
  -H "Content-Type: multipart/form-data" \
  -F "file=@meeting.mp3" \
  -F "title=íŒ€ í”„ë¡œì íŠ¸ ê¸°íš íšŒì˜" \
  -F "participants=ê¹€ì² ìˆ˜,ì´ì˜í¬,ë°•ë¯¼ìˆ˜"
```

### GET /audio/status/{filename}

ì˜¤ë””ì˜¤ íŒŒì¼ ì²˜ë¦¬ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

#### ìš”ì²­

| íŒŒë¼ë¯¸í„° | íƒ€ìž… | í•„ìˆ˜ | ì„¤ëª… |
|----------|------|------|------|
| `filename` | string | âœ… | íŒŒì¼ëª… |

#### ì‘ë‹µ

```json
{
  "filename": "20240101_120000_meeting.mp3",
  "status": "processing",
  "progress": 75,
  "stt_completed": true,
  "diarization_completed": false,
  "summary_completed": false,
  "estimated_completion": "2024-01-01T12:05:00Z"
}
```

### GET /audio/list

ì—…ë¡œë“œëœ ì˜¤ë””ì˜¤ íŒŒì¼ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

#### ì‘ë‹µ

```json
{
  "files": [
    {
      "filename": "20240101_120000_meeting.mp3",
      "title": "íŒ€ í”„ë¡œì íŠ¸ ê¸°íš íšŒì˜",
      "upload_date": "2024-01-01T12:00:00Z",
      "status": "completed",
      "duration": 3600,
      "participants": ["ê¹€ì² ìˆ˜", "ì´ì˜í¬", "ë°•ë¯¼ìˆ˜"]
    }
  ],
  "total_count": 1
}
```

### DELETE /audio/{filename}

ì˜¤ë””ì˜¤ íŒŒì¼ì„ ì‚­ì œí•©ë‹ˆë‹¤.

#### ìš”ì²­

| íŒŒë¼ë¯¸í„° | íƒ€ìž… | í•„ìˆ˜ | ì„¤ëª… |
|----------|------|------|------|
| `filename` | string | âœ… | íŒŒì¼ëª… |

#### ì‘ë‹µ

```json
{
  "message": "Audio file deleted successfully",
  "filename": "20240101_120000_meeting.mp3"
}
```

## ðŸ”§ ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

### ì§€ì›í•˜ëŠ” ì˜¤ë””ì˜¤ í˜•ì‹

- **WAV**: ë¬´ì†ì‹¤ ì••ì¶•, ê³ í’ˆì§ˆ
- **MP3**: ì†ì‹¤ ì••ì¶•, ì¼ë°˜ì ì¸ ìš©ë„
- **M4A**: AAC ì½”ë±, iOS í˜¸í™˜

### íŒŒì¼ í¬ê¸° ì œí•œ

- **ìµœëŒ€ íŒŒì¼ í¬ê¸°**: 100MB
- **ê¶Œìž¥ íŒŒì¼ í¬ê¸°**: 50MB ì´í•˜
- **ìµœì†Œ íŒŒì¼ í¬ê¸°**: 1KB

### ì²˜ë¦¬ ë‹¨ê³„

1. **íŒŒì¼ ê²€ì¦**: í˜•ì‹, í¬ê¸° í™•ì¸
2. **STT ì²˜ë¦¬**: Whisper ëª¨ë¸ë¡œ ìŒì„±â†’í…ìŠ¤íŠ¸ ë³€í™˜
3. **Speaker Diarization**: ë°œí™”ìž ë¶„ë¦¬
4. **ë©”íƒ€ë°ì´í„° ì¶”ì¶œ**: ì‹œê°„, ì°¸ê°€ìž ì •ë³´
5. **ë°ì´í„°ë² ì´ìŠ¤ ì €ìž¥**: ì²˜ë¦¬ ê²°ê³¼ ì €ìž¥

### ì„±ëŠ¥ ì§€í‘œ

| ì§€í‘œ | ëª©í‘œê°’ | ì¸¡ì • ë°©ë²• |
|------|--------|-----------|
| STT ì •í™•ë„ | > 90% | WER (Word Error Rate) |
| ì²˜ë¦¬ ì‹œê°„ | < 5ë¶„ (10ë¶„ ì˜¤ë””ì˜¤) | ì‹¤ì œ ì¸¡ì • |
| ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ | < 2GB | ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ |

## ðŸš¨ ì—ëŸ¬ ì²˜ë¦¬

### ì¼ë°˜ì ì¸ ì—ëŸ¬

| ì—ëŸ¬ ì½”ë“œ | ìƒí™© | í•´ê²° ë°©ë²• |
|-----------|------|-----------|
| `FILE_TOO_LARGE` | íŒŒì¼ í¬ê¸° ì´ˆê³¼ | íŒŒì¼ì„ ë” ìž‘ê²Œ ë¶„í•  |
| `UNSUPPORTED_FORMAT` | ì§€ì›í•˜ì§€ ì•ŠëŠ” í˜•ì‹ | WAV, MP3, M4Aë¡œ ë³€í™˜ |
| `PROCESSING_ERROR` | ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ | íŒŒì¼ ìž¬ì—…ë¡œë“œ |

### ë””ë²„ê¹… íŒ

1. **íŒŒì¼ í˜•ì‹ í™•ì¸**: `file` ëª…ë ¹ì–´ë¡œ ì‹¤ì œ í˜•ì‹ í™•ì¸
2. **íŒŒì¼ í¬ê¸° í™•ì¸**: ì—…ë¡œë“œ ì „ íŒŒì¼ í¬ê¸° ì²´í¬
3. **ë„¤íŠ¸ì›Œí¬ ìƒíƒœ**: ì—…ë¡œë“œ ì¤‘ ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸

## ðŸ“Š ëª¨ë‹ˆí„°ë§

### ë¡œê·¸ í™•ì¸

```bash
# ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸
tail -f logs/audio_processing.log

# ì—ëŸ¬ ë¡œê·¸ë§Œ í™•ì¸
grep "ERROR" logs/audio_processing.log
```

### ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

- **ì²˜ë¦¬ ì‹œê°„**: í‰ê· , ìµœëŒ€, ìµœì†Œ ì‹œê°„ ì¶”ì 
- **ì„±ê³µë¥ **: ì²˜ë¦¬ ì„±ê³µ/ì‹¤íŒ¨ ë¹„ìœ¨
- **ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰**: CPU, ë©”ëª¨ë¦¬, ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰

## ðŸ”„ ê°œì„  ìš”ì†Œ

- [ ] ì‹¤ì‹œê°„ ì²˜ë¦¬ ìƒíƒœ ì—…ë°ì´íŠ¸
- [ ] ë°°ì¹˜ ì²˜ë¦¬ ê¸°ëŠ¥ ì¶”ê°€
- [ ] ì—ëŸ¬ ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜
- [ ] ë‹¤êµ­ì–´ ì§€ì› í™•ìž¥
- [ ] ë…¸ì´ì¦ˆ ì œê±° ê¸°ëŠ¥
- [ ] ìŒì„± í’ˆì§ˆ í–¥ìƒ